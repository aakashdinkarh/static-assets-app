"use strict";(self.webpackChunkstatic_assets_app=self.webpackChunkstatic_assets_app||[]).push([[698],{698:(e,t,a)=>{a.r(t),a.d(t,{UploadPage:()=>M});var r=a(43),n=a(981),s=a(893);const i={form:"imageUploader_form__1KRB0",formGroup:"imageUploader_formGroup__OFre5",label:"imageUploader_label__xKTyW",input:"imageUploader_input__gjq8Y",button:"imageUploader_button__2l2RS",fileInputWrapper:"imageUploader_fileInputWrapper__yNFy9",fileInputContainer:"imageUploader_fileInputContainer__oGP90",previewContainer:"imageUploader_previewContainer__jwofY",previewImage:"imageUploader_previewImage__tYdAv",previewPlaceholder:"imageUploader_previewPlaceholder__uHrAK"};var o=a(409),l=a(555),c=a(986);const m="input_label__xuGk1",u="input_input__NwTQL",d="input_error__Ivs9h",p="input_inputGroup__4feuD";var h=a(394),g=a(579);const f=["label","errorMessage","name","labelClassName","inputGroupClassName","errorClassName","className","required"],_=e=>{let{label:t,errorMessage:a,name:r,labelClassName:n,inputGroupClassName:s,errorClassName:i,className:o,required:_=!0}=e,v=(0,c.A)(e,f);return(0,g.jsxs)("div",{className:(0,h.z)(p,s),children:[(0,g.jsx)("label",{htmlFor:r,className:(0,h.z)(m,n),children:t}),(0,g.jsx)("input",(0,l.A)({type:"text",id:r,name:r,className:(0,h.z)(u,o),required:_},v)),a&&(0,g.jsx)("div",{className:(0,h.z)(d,i),children:a})]})},v=["children","validateAll","onSubmit","onError"],y=e=>{let{children:t,validateAll:a=!1,onSubmit:r,onError:n}=e,s=(0,c.A)(e,v);return(0,g.jsx)("form",(0,l.A)((0,l.A)({noValidate:a,onSubmit:e=>{e.preventDefault();const t=e.target;if(a){const e=t.elements,a={};if(Array.from(e).forEach((e=>{(e=>(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&!e.checkValidity())(e)&&(a[e.name]=(e=>{var t,a,r;const{validity:n}=e,s=null===(t=e.labels)||void 0===t||null===(a=t[0])||void 0===a||null===(r=a.textContent)||void 0===r?void 0:r.trim();if(s){if(n.valueMissing)return"".concat(s," is required.");if(n.typeMismatch)return"Please enter ".concat(s," in a valid format.");if(n.patternMismatch)return"".concat(s," does not match the expected pattern.");if(n.tooShort&&"minLength"in e)return"".concat(s," must be at least ").concat(e.minLength," characters.");if(n.tooLong&&"maxLength"in e)return"".concat(s," must be at most ").concat(e.maxLength," characters.");if(n.rangeUnderflow&&"min"in e)return"".concat(s," must be at least ").concat(e.min,".");if(n.rangeOverflow&&"max"in e)return"".concat(s," must be at most ").concat(e.max,".");if(n.stepMismatch)return"".concat(s," must be a valid step value.");if(n.badInput)return"".concat(s," must be a number.");if(n.customError)return"".concat(s," has a custom error.")}return n.valueMissing?"This field is required.":n.typeMismatch?"Please enter a valid format.":n.patternMismatch?"Input does not match the expected pattern.":n.tooShort&&"minLength"in e?"Minimum length is ".concat(e.minLength," characters."):n.tooLong&&"maxLength"in e?"Maximum length is ".concat(e.maxLength," characters."):n.rangeUnderflow&&"min"in e?"Value should be at least ".concat(e.min,"."):n.rangeOverflow&&"max"in e?"Value should be at most ".concat(e.max,"."):n.stepMismatch?"Please enter a valid step value.":n.badInput?"Please enter a number.":n.customError?e.validationMessage:""})(e))})),Object.keys(a).length>0)return void(null===n||void 0===n||n(a))}const s=new FormData(t),i=Object.fromEntries(s);r(i,t)}},s),{},{children:t}))},b={file:"file",directory:"directory",filename:"filename"},x=(e,t)=>{if(!e)return;const a=e.elements[b.filename];a&&(a.value=t||"")};function j(e){let{onSuccess:t,onError:a}=e;const[l,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),[d,p]=(0,r.useState)({});(0,r.useEffect)((()=>()=>{m&&URL.revokeObjectURL(m)}),[m]);return(0,g.jsxs)(y,{onSubmit:async(e,r)=>{const n=e[b.file],i=e[b.directory],o=e[b.filename];if(n&&i&&o){c(!0);try{const e=await(0,s.eC)({file:n,directory:i,filename:o,commitMessage:"Upload ".concat(o)});null===t||void 0===t||t(e),r.reset(),u(null)}catch(l){null===a||void 0===a||a(l instanceof Error?l.message:"Failed to upload image")}finally{c(!1)}}else null===a||void 0===a||a("Please fill in all fields")},validateAll:!0,onError:p,className:i.form,children:[(0,g.jsxs)("div",{className:i.fileInputWrapper,children:[(0,g.jsx)("div",{className:i.fileInputContainer,children:(0,g.jsx)(_,{label:"Image File",name:b.file,type:"file",accept:"image/*",onChange:e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];try{x(e.target.form,null===a||void 0===a?void 0:a.name)}catch(r){}if(a){const e=URL.createObjectURL(a);u(e)}else u(null)},errorMessage:d[b.file],required:!0})}),(0,g.jsx)("div",{className:i.previewContainer,children:m?(0,g.jsx)(n._,{src:m,alt:"Preview",className:i.previewImage,width:300,height:200,style:{objectFit:"contain"}}):(0,g.jsx)("span",{className:i.previewPlaceholder,children:"Image preview will appear here"})})]}),(0,g.jsx)(_,{label:"Directory Path",name:b.directory,placeholder:"e.g., images/blog",errorMessage:d[b.directory]}),(0,g.jsx)(_,{label:"File Name",name:b.filename,placeholder:"e.g., header-image.jpg",errorMessage:d[b.filename]}),(0,g.jsx)(o.jn,{type:"submit",disabled:l,style:w,children:l?"Uploading...":"Upload Image"})]})}const w={justifyContent:"center"},N={title:"page_title__c2NqO",statusMessage:"page_statusMessage__EOma9",success:"page_success__9Ysa+",error:"page_error__4z8Yk",imageLink:"page_imageLink__VR1CN",instructions:"page_instructions__v0Iqh",instructionsTitle:"page_instructionsTitle__9yBST",instructionsList:"page_instructionsList__yDC14"};function M(){const[e,t]=(0,r.useState)({type:null,message:""});return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h1",{className:N.title,children:"Upload Images to GitHub"}),e.type&&(0,g.jsxs)("div",{className:"".concat(N.statusMessage," ").concat("success"===e.type?N.success:N.error),children:[(0,g.jsx)("p",{children:e.message}),e.url&&(0,g.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:N.imageLink,children:"View uploaded image"})]}),(0,g.jsx)(j,{onSuccess:e=>{t({type:"success",message:e.message,url:e.url})},onError:e=>{t({type:"error",message:e})}}),(0,g.jsxs)("div",{className:N.instructions,children:[(0,g.jsx)("h2",{className:N.instructionsTitle,children:"Instructions:"}),(0,g.jsxs)("ul",{className:N.instructionsList,children:[(0,g.jsx)("li",{children:"Select an image file to upload"}),(0,g.jsx)("li",{children:"Specify the target directory in the repository (e.g., \u201cimages/blog\u201d)"}),(0,g.jsx)("li",{children:"Provide a filename for the image (e.g., \u201cheader-image.jpg\u201d)"}),(0,g.jsx)("li",{children:"The image will be committed to your configured GitHub repository"})]})]})]})}},893:(e,t,a)=>{a.d(t,{U2:()=>c,Ji:()=>i,QF:()=>l,eC:()=>o});var r=a(392),n=a(524);const s=()=>{const e=(0,n.Ri)(n.v$)||"";return{[n.v$]:e}},i=async e=>{const t="".concat(r.BQ.url,"?path=").concat(e),a=await fetch(t);if(!a.ok)throw new Error("Failed to fetch repository contents");const n=(await a.json()).data.data;return Array.isArray(n)?n:[n]},o=async e=>{let{file:t,directory:a,filename:n,commitMessage:i}=e;const o=new FormData;o.append("file",t),o.append("directory",a),o.append("filename",n),o.append("commit_message",i);const l=await fetch(r.sV.url,{method:r.sV.method,headers:s(),body:o});if(!l.ok)throw new Error("Failed to upload content");return(await l.json()).data},l=async e=>{let{path:t,content:a,commitMessage:n,sha:i}=e;const o=await fetch(r.Yl.url,{method:r.Yl.method,headers:s(),body:JSON.stringify({path:t,content:a,commitMessage:n,sha:i})});if(!o.ok)throw new Error("Failed to update content");return(await o.json()).data},c=async e=>{let{path:t,message:a,sha:n}=e;const i=a||"Delete ".concat(t);if(!(await fetch(r.c8.url,{method:r.c8.method,headers:s(),body:JSON.stringify({path:t,commitMessage:i,sha:n})})).ok)throw new Error("Failed to delete item")}}}]);
//# sourceMappingURL=698.db36caa5.chunk.js.map