"use strict";(self.webpackChunkstatic_assets_app=self.webpackChunkstatic_assets_app||[]).push([[941],{893:(e,t,a)=>{a.d(t,{U2:()=>d,Ji:()=>l,QF:()=>c,eC:()=>o});var s=a(392),n=a(524);const r=()=>{const e=(0,n.Ri)(n.v$)||"";return{[n.v$]:e}};var i=a(323);const l=async e=>{const t="".concat(s.BQ.url,"?path=").concat(e),a=await fetch(t);await(0,i.L)(a);const n=(await a.json()).data.data;return Array.isArray(n)?n:[n]},o=async e=>{let{file:t,directory:a,filename:n,commitMessage:l}=e;const o=new FormData;o.append("file",t),o.append("directory",a),o.append("filename",n),o.append("commit_message",l);const c=await fetch(s.sV.url,{method:s.sV.method,headers:r(),body:o});await(0,i.L)(c);return(await c.json()).data},c=async e=>{let{path:t,content:a,commitMessage:n,sha:l}=e;const o=await fetch(s.Yl.url,{method:s.Yl.method,headers:r(),body:JSON.stringify({path:t,content:a,commitMessage:n,sha:l})});await(0,i.L)(o);return(await o.json()).data},d=async e=>{let{path:t,message:a,sha:n}=e;const l=a||"Delete ".concat(t),o=await fetch(s.c8.url,{method:s.c8.method,headers:r(),body:JSON.stringify({path:t,commitMessage:l,sha:n})});await(0,i.L)(o)}},941:(e,t,a)=>{a.r(t),a.d(t,{RepoBrowser:()=>ue});var s=a(43),n=a(56);const r="previews_loading__xtsFd",i="previews_error__48o0q",l="previews_warn__JpleS",o="previews_editActions__yhvBA",c="previews_textContentContainer__L9yeb",d="previews_textContentHeaderAndErrorContainer__Doc5e",h="previews_textContentHeader__EjvBd",m="previews_textContentPreview__CwE4f",p="previews_imagePreview__1kH7W",u="previews_unsupported__g09Nl",f="previews_downloadLink__hhrJn",v="previews_pdfViewer__A-LWv";var x=a(981),_=a(579);function j(e){let{src:t,alt:a}=e;return(0,_.jsx)(x._,{src:t,alt:a,className:p})}function w(e){let{url:t,filename:a}=e;return(0,_.jsxs)("div",{className:u,children:["This file type is not supported for preview.",(0,_.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:f,children:["Download ",a]})]})}var g=a(555);const y="commitDialog_input__2zHj8",b="commitDialog_errorMessage__IYQQp",N=e=>{let{isOpen:t,defaultMessage:a="",onConfirm:r,onCancel:i,errorMessage:l=""}=e;const[o,c]=(0,s.useState)(a);return(0,_.jsxs)(n.a,{isOpen:t,onClose:i,title:"Enter Commit Message",primaryActionLabel:"Save Changes",secondaryActionLabel:"Cancel",primaryActionHandler:()=>r(o),modalStyle:{minWidth:"400px"},overrideOnClose:!0,children:[(0,_.jsx)("input",{type:"text",className:y,value:o,onChange:e=>c(e.target.value),placeholder:"Enter a commit message",autoFocus:!0}),l&&(0,_.jsx)("div",{className:b,children:l})]})};var C=a(893),L=a(35);const E=(0,a(131).v)((e=>({loading:!1,setLoading:t=>e({loading:t}),isEditing:!1,setIsEditing:t=>e({isEditing:t})})));var I=a(409),P=a(60);const S="textarea_textarea__P2Lea",M=e=>{let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return(0,_.jsx)("textarea",(0,g.A)({className:S,spellCheck:!1},t))},A="cache-control",D=e=>"GitHub caches content for ".concat(Math.floor(parseInt(e.split("=")[1])/60)," mins."),k={width:"calc(90vw - 3rem)"};function F(e){let{url:t,path:a,sha:n,contentValidation:p}=e;const[u,f]=(0,s.useState)(null),[v,x]=(0,s.useState)(null),[j,w]=(0,s.useState)(null),{loading:y,setLoading:b,isEditing:S,setIsEditing:F}=E(),{listItems:B,setListItems:R}=(0,L.N)(),{modalScreen:O,openScreen:U,closeScreen:V,setModalActionsDisabled:H}=(0,P.K)(),Q=!(null===O||void 0===O||!O.includes(P.M.CommitModal)),T=()=>V(P.M.CommitModal),z=y&&null===u,J=(0,s.useRef)(null);(0,s.useEffect)((()=>{(async()=>{try{b(!0);const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch file content");const a=await e.text();f(a),x({[A]:e.headers.get(A)})}catch(e){w({preview:e instanceof Error?e.message:"Failed to load content"})}finally{b(!1)}})()}),[f,w,b,t]);if(z)return(0,_.jsx)("div",{className:r,children:"Loading..."});if(null!==j&&void 0!==j&&j.preview&&!u)return(0,_.jsx)("div",{className:i,children:j.preview});if(!u)return(0,_.jsx)("div",{className:i,children:"No content available"});const K=null===v||void 0===v?void 0:v[A];return(0,_.jsx)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget).get("edit-content");if(t)try{null===p||void 0===p||p(t),J.current=t,w(null),U(P.M.CommitModal)}catch(a){const e=a instanceof Error?a.message:"Failed to save changes";w({validation:"Validation error: "+e})}},children:(0,_.jsxs)("div",{className:c,children:[(0,_.jsxs)("div",{className:d,children:[(0,_.jsxs)("div",{children:[K&&(0,_.jsx)("p",{className:l,children:D(K)}),(null===j||void 0===j?void 0:j.preview)&&(0,_.jsx)("p",{className:i,children:j.preview}),(null===j||void 0===j?void 0:j.validation)&&(0,_.jsx)("p",{className:i,children:j.validation})]}),(0,_.jsx)("div",{className:h,children:S?(0,_.jsxs)("div",{className:o,children:[(0,_.jsx)(I.jn,{type:"submit",children:"Save"}),(0,_.jsx)(I.tA,{onClick:()=>{F(!1),w(null)},children:"Cancel"})]}):(0,_.jsx)(I.jn,{onClick:()=>{F(!0),w(null)},children:"Edit"})})]}),S?(0,_.jsx)(M,{name:"edit-content",defaultValue:u||"",style:k}):(0,_.jsx)("pre",{className:m,children:(0,_.jsx)("code",{children:u})}),Q&&(0,_.jsx)(N,{isOpen:Q,defaultMessage:"Update ".concat(a),onConfirm:async e=>{if(J.current&&e.trim()){if(J.current===u)return F(!1),void T();w(null),H(!0);try{const t=await(0,C.QF)({path:a,content:J.current,commitMessage:e,sha:n});f(J.current),F(!1),(e=>{const t=B.map((t=>t.path===a?(0,g.A)((0,g.A)({},t),{},{sha:e}):t));R(t)})(t.sha),T()}catch(t){w({commit:t instanceof Error?t.message:"Failed to save changes"})}finally{H(!1)}}},onCancel:T,errorMessage:null===j||void 0===j?void 0:j.commit})]})})}function B(e){let{url:t,path:a}=e;const[n,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),[h,m]=(0,s.useState)(null),[p,u]=(0,s.useState)(null);if((0,s.useEffect)((()=>{(async()=>{try{d(!0);const e=await fetch(t,{headers:{Accept:"application/pdf"}});if(!e.ok)throw new Error("Failed to fetch PDF");const a=await e.blob(),s=new Blob([a],{type:"application/pdf"}),n=URL.createObjectURL(s);o(n),u({[A]:e.headers.get(A)}),m(null)}catch(e){m(e instanceof Error?e.message:"Failed to load PDF")}finally{d(!1)}})()}),[t]),(0,s.useEffect)((()=>()=>{n&&URL.revokeObjectURL(n)}),[n]),c)return(0,_.jsx)("div",{className:r,children:"Loading PDF..."});if(h)return(0,_.jsx)("div",{className:i,children:h});const f=null===p||void 0===p?void 0:p[A];return(0,_.jsxs)("div",{children:[f&&(0,_.jsx)("p",{className:l,children:D(f)}),n&&(0,_.jsx)("object",{data:n,type:"application/pdf",className:v,title:"PDF Preview: ".concat(a),children:(0,_.jsxs)("p",{children:["Your browser does not support PDF preview.",(0,_.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:"Click here to open the PDF"})]})})]})}const R={json:JSON.parse},O=e=>{if(U(e))return R[e.split(".").pop()]},U=e=>"LICENSE"===e||/\.(txt|md|json|html|css|js|jsx|ts|tsx|yaml|yml|xml|csv|log)$/i.test(e),V=e=>{let{previewItemPath:t}=e;const{listItems:a}=(0,L.N)(),{modalScreen:r,closeModal:i}=(0,P.K)(),{setIsEditing:l}=E(),o=!(null===r||void 0===r||!r.includes(P.M.FilePreview));if((0,s.useEffect)((()=>{o||l(!1)}),[o,l]),!o)return null;const c=a.find((e=>e.path===t));return(0,_.jsx)(n.a,{isOpen:o,onClose:i,title:c.name,primaryActionLabel:"Save Changes",secondaryActionLabel:"Cancel",primaryActionHandler:()=>{},modalStyle:{maxWidth:"90vw"},showFooter:!1,children:(()=>{return e=c.name,/\.(jpg|jpeg|png|gif|svg|webp)$/i.test(e)?(0,_.jsx)(j,{src:c.download_url,alt:c.name}):(e=>/\.(pdf)$/i.test(e))(c.name)?(0,_.jsx)(B,{url:c.download_url,path:c.path}):U(c.name)?(0,_.jsx)(F,{url:c.download_url,path:c.path,sha:c.sha,contentValidation:O(c.name)}):(0,_.jsx)(w,{url:c.download_url,filename:c.name});var e})()})};var H=a(467);const Q="/",T={breadcrumb:"breadcrumb_breadcrumb__WeMsB",breadcrumbSeparator:"breadcrumb_breadcrumbSeparator__TaR28"};function z(e){let{currentPath:t,onNavigate:a}=e;const n=t.split("/").filter(Boolean);return 0===n.length?null:(0,_.jsxs)("div",{className:T.breadcrumb,children:[(0,_.jsx)(H.vx,{onClick:()=>a(Q),children:"root"}),n.map(((e,t)=>(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)("span",{className:T.breadcrumbSeparator,children:"/"}),(0,_.jsx)(H.vx,{onClick:()=>a(n.slice(0,t+1).join("/")),children:e})]},e)))]})}var J=a(191);const K={container:"RepoBrowser_container__szVdA",header:"RepoBrowser_header__xCXIr",branchName:"RepoBrowser_branchName__Rh8Kw",refreshButton:"RepoBrowser_refreshButton__rgcju"},W=e=>{let{handleRefresh:t}=e;const{isLoading:a,branch:s}=(0,L.N)();return(0,_.jsxs)("h1",{className:K.header,children:["Repository Browser"," ",s&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(H.tA,{className:K.branchName,children:[(0,_.jsx)(x._,{src:J.U,alt:"git branch"}),s]})}),(0,_.jsx)(H.tA,{disabled:a,className:K.refreshButton,onClick:t,children:"\ud83d\udd04"})]})};var Y=a(813);const $=e=>{delete Y.PP[e]};var G=a(833);const Z=()=>{const{currentPath:e,setListItems:t,setIsLoading:a,setError:n}=(0,L.N)(),r=!!(0,G.useGithubUserInfoStore)().userInfo,{setModalActionsDisabled:i}=(0,P.K)(),l=(0,s.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=(e=>{const t=Y.PP[e];return t?Date.now()-t.timestamp>Y.bY?($(e),null):t.data:null})(e);if(!r||s){a(!0),n(null);try{const a=s?"".concat(e,"&refresh=true"):e,n=await(0,C.Ji)(a);((e,t)=>{Y.PP[e]={data:t,timestamp:Date.now()}})(e,n),t(n)}catch(i){n(i instanceof Error?i.message:"An error occurred")}finally{a(!1)}}else t(r)}),[n,a,t]),o=(0,s.useCallback)((async t=>{try{i(!0),await(0,C.U2)({path:t.path,message:"Delete ".concat(t.name," from ").concat(e),sha:t.sha}),$(e),l(e)}catch(a){n(a instanceof Error?a.message:"Failed to delete item")}finally{i(!1)}}),[e,l,n,i]),c=(0,s.useCallback)((()=>{$(e),l(e,!0)}),[e,l]);return(0,s.useEffect)((()=>{l(e)}),[e,l,r]),{handleDelete:o,handleRefresh:c}};var q=a(316),X=a(168);const ee=e=>{let{onConfirm:t,title:a,message:s}=e;const{modalScreen:n}=(0,P.K)(),r=n===P.M.ConfirmationModal;return(0,_.jsx)(q.a,{isOpen:r,title:a,primaryActionLabel:"DELETE",secondaryActionLabel:"Close",primaryActionHandler:t,primaryActionType:X.V.Danger,children:s})},te=[{path:"LICENSE",type:"file"},{path:"README.md",type:"file"},{path:"files",type:"dir"},{path:"images",type:"dir"},{path:"index.html",type:"file"},{path:"sounds",type:"dir"}];var ae=a(394);const se="repoListItems_itemList__nAQwV",ne="repoListItems_item__CTZBT",re="repoListItems_loadingList__N+dUc",ie="repoListItems_itemName__BvflF",le="repoListItems_fileSize__mZI8g",oe="repoListItems_actions__Wy8oe",ce={minHeight:"31.5px",minWidth:"70.5px"},de=e=>{let{loaderListItems:t}=e;return(0,_.jsx)("div",{className:(0,ae.z)(se,re),children:t.map((e=>(0,_.jsxs)("div",{className:ne,children:[(0,_.jsx)("div",{className:ie,children:"dir"===e.type?"\ud83d\udcc1 ":"\ud83d\udcc4 "}),"file"===e.type&&(0,_.jsx)("div",{className:oe,children:(0,_.jsx)(H.Qi,{disabled:!0,style:ce})})]},e.path)))})},he=e=>{let{setPreviewItemPath:t,setDeleteItemPath:a}=e;const{listItems:n,isLoading:r,setCurrentPath:i}=(0,L.N)(),{openModal:l}=(0,P.K)(),o=(0,s.useMemo)((()=>n.length?n:te),[n.length]);return r?(0,_.jsx)(de,{loaderListItems:o}):(0,_.jsx)("div",{className:se,children:n.map((e=>(0,_.jsxs)("div",{className:ne,children:[(0,_.jsxs)("div",{className:ie,onClick:()=>(e=>{"dir"===e.type?i(e.path):(t(e.path),l([P.M.FilePreview]))})(e),role:"button",tabIndex:0,children:["dir"===e.type?"\ud83d\udcc1 ":"\ud83d\udcc4 ",e.name,"file"===e.type&&e.size&&(0,_.jsxs)("span",{className:le,children:["(",(e.size/1024).toFixed(1)," KB)"]})]}),"file"===e.type&&(0,_.jsx)("div",{className:oe,children:(0,_.jsx)(H.Qi,{onClick:()=>{return t=e.path,a(t),void l(P.M.ConfirmationModal);var t},children:"Delete"})})]},e.path)))})},me=e=>{let{deleteItemPath:t,handleDelete:a}=e;const{listItems:s}=(0,L.N)(),n=s.find((e=>e.path===t));if(!n)return null;const r=(0,_.jsxs)("span",{style:{wordBreak:"break-all"},children:["Are you sure you want to delete ",(0,_.jsx)("strong",{children:t}),"?"]});return(0,_.jsx)(ee,{title:"Delete Item",message:r,onConfirm:()=>a(n)})},pe=(0,s.lazy)((()=>a.e(594).then(a.bind(a,594)).then((e=>({default:e.Error})))));function ue(){const[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)(null),{handleDelete:r,handleRefresh:i}=Z(),{error:l,currentPath:o,setCurrentPath:c}=(0,L.N)();return(0,_.jsxs)("div",{className:K.container,children:[(0,_.jsx)(W,{handleRefresh:i}),(0,_.jsx)(z,{currentPath:o,onNavigate:c}),l?(0,_.jsx)(s.Suspense,{fallback:(0,_.jsx)("div",{children:"Loading..."}),children:(0,_.jsx)(pe,{error:l})}):(0,_.jsx)(he,{setPreviewItemPath:t,setDeleteItemPath:n}),e&&(0,_.jsx)(V,{previewItemPath:e}),a&&(0,_.jsx)(me,{deleteItemPath:a,handleDelete:r})]})}}}]);