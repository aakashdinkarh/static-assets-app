"use strict";(self.webpackChunkweb_repo_editor=self.webpackChunkweb_repo_editor||[]).push([[698],{698:(e,a,t)=>{t.r(a),t.d(a,{UploadPage:()=>I});var r=t(43),n=t(981),s=t(467),i=t(893);const l={form:"imageUploader_form__1KRB0",formGroup:"imageUploader_formGroup__OFre5",label:"imageUploader_label__xKTyW",input:"imageUploader_input__gjq8Y",button:"imageUploader_button__2l2RS",fileInputWrapper:"imageUploader_fileInputWrapper__yNFy9",fileInputContainer:"imageUploader_fileInputContainer__oGP90",previewContainer:"imageUploader_previewContainer__jwofY",previewImage:"imageUploader_previewImage__tYdAv",previewPlaceholder:"imageUploader_previewPlaceholder__uHrAK"};var o=t(409),c=t(555),m=t(986);const u="input_label__xuGk1",d="input_input__NwTQL",p="input_error__Ivs9h",h="input_inputGroup__4feuD";var g=t(394),f=t(579);const _=["label","errorMessage","name","labelClassName","inputGroupClassName","errorClassName","className","required"],v=e=>{let{label:a,errorMessage:t,name:r,labelClassName:n,inputGroupClassName:s,errorClassName:i,className:l,required:o=!0}=e,v=(0,m.A)(e,_);return(0,f.jsxs)("div",{className:(0,g.z)(h,s),children:[(0,f.jsx)("label",{htmlFor:r,className:(0,g.z)(u,n),children:a}),(0,f.jsx)("input",(0,c.A)({type:"text",id:r,name:r,className:(0,g.z)(d,l),required:o},v)),t&&(0,f.jsx)("div",{className:(0,g.z)(p,i),children:t})]})},b=["children","validateAll","onSubmit","onError"],y=e=>{let{children:a,validateAll:t=!1,onSubmit:r,onError:n}=e,s=(0,m.A)(e,b);return(0,f.jsx)("form",(0,c.A)((0,c.A)({noValidate:t,onSubmit:e=>{e.preventDefault();const a=e.target;if(t){const e=a.elements,t={};if(Array.from(e).forEach((e=>{(e=>(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&!e.checkValidity())(e)&&(t[e.name]=(e=>{var a,t,r;const{validity:n}=e,s=null===(a=e.labels)||void 0===a||null===(t=a[0])||void 0===t||null===(r=t.textContent)||void 0===r?void 0:r.trim();if(s){if(n.valueMissing)return"".concat(s," is required.");if(n.typeMismatch)return"Please enter ".concat(s," in a valid format.");if(n.patternMismatch)return"".concat(s," does not match the expected pattern.");if(n.tooShort&&"minLength"in e)return"".concat(s," must be at least ").concat(e.minLength," characters.");if(n.tooLong&&"maxLength"in e)return"".concat(s," must be at most ").concat(e.maxLength," characters.");if(n.rangeUnderflow&&"min"in e)return"".concat(s," must be at least ").concat(e.min,".");if(n.rangeOverflow&&"max"in e)return"".concat(s," must be at most ").concat(e.max,".");if(n.stepMismatch)return"".concat(s," must be a valid step value.");if(n.badInput)return"".concat(s," must be a number.");if(n.customError)return"".concat(s," has a custom error.")}return n.valueMissing?"This field is required.":n.typeMismatch?"Please enter a valid format.":n.patternMismatch?"Input does not match the expected pattern.":n.tooShort&&"minLength"in e?"Minimum length is ".concat(e.minLength," characters."):n.tooLong&&"maxLength"in e?"Maximum length is ".concat(e.maxLength," characters."):n.rangeUnderflow&&"min"in e?"Value should be at least ".concat(e.min,"."):n.rangeOverflow&&"max"in e?"Value should be at most ".concat(e.max,"."):n.stepMismatch?"Please enter a valid step value.":n.badInput?"Please enter a number.":n.customError?e.validationMessage:""})(e))})),Object.keys(t).length>0)return void(null===n||void 0===n||n(t))}const s=new FormData(a),i=Object.fromEntries(s);r(i,a)}},s),{},{children:a}))},x={file:"file",directory:"directory",filename:"filename"},j=(e,a)=>{if(!e)return;const t=e.elements[x.filename];t&&(t.value=a||"")};function w(e){let{onSuccess:a,onError:t}=e;const[s,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),[d,p]=(0,r.useState)({});(0,r.useEffect)((()=>()=>{m&&URL.revokeObjectURL(m)}),[m]);return(0,f.jsxs)(y,{onSubmit:async(e,r)=>{const n=e[x.file],s=e[x.directory],l=e[x.filename];if(n&&s&&l){c(!0);try{const e=await(0,i.eC)({file:n,directory:s,filename:l,commitMessage:"Upload ".concat(l)});null===a||void 0===a||a(e),r.reset(),u(null)}catch(o){null===t||void 0===t||t(o instanceof Error?o.message:"Failed to upload image")}finally{c(!1)}}else null===t||void 0===t||t("Please fill in all fields")},validateAll:!0,onError:p,className:l.form,children:[(0,f.jsxs)("div",{className:l.fileInputWrapper,children:[(0,f.jsx)("div",{className:l.fileInputContainer,children:(0,f.jsx)(v,{label:"Image File",name:x.file,type:"file",accept:"image/*",onChange:e=>{var a;const t=null===(a=e.target.files)||void 0===a?void 0:a[0];try{j(e.target.form,null===t||void 0===t?void 0:t.name)}catch(r){}if(t){const e=URL.createObjectURL(t);u(e)}else u(null)},errorMessage:d[x.file],required:!0})}),(0,f.jsx)("div",{className:l.previewContainer,children:m?(0,f.jsx)(n._,{src:m,alt:"Preview",className:l.previewImage,width:300,height:200,style:{objectFit:"contain"}}):(0,f.jsx)("span",{className:l.previewPlaceholder,children:"Image preview will appear here"})})]}),(0,f.jsx)(v,{label:"Directory Path",name:x.directory,placeholder:"e.g., images/blog",errorMessage:d[x.directory]}),(0,f.jsx)(v,{label:"File Name",name:x.filename,placeholder:"e.g., header-image.jpg",errorMessage:d[x.filename]}),(0,f.jsx)(o.jn,{type:"submit",disabled:s,style:N,children:s?"Uploading...":"Upload Image"})]})}const N={justifyContent:"center"};var L=t(191),M=t(813),U=t(35);const C={title:"page_title__c2NqO",statusMessage:"page_statusMessage__EOma9",success:"page_success__9Ysa+",error:"page_error__4z8Yk",imageLink:"page_imageLink__VR1CN",instructions:"page_instructions__v0Iqh",instructionsTitle:"page_instructionsTitle__9yBST",instructionsList:"page_instructionsList__yDC14",branchName:"page_branchName__sQ16v"};function I(){const[e,a]=(0,r.useState)({type:null,message:""}),{branch:t}=(0,U.N)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("h2",{className:C.title,children:["Upload Images to GitHub",(0,f.jsxs)(s.tA,{className:C.branchName,onClick:()=>{window.open((0,M.wS)(t),"_blank")},children:[(0,f.jsx)(n._,{src:L.UM,alt:"git branch"}),t]})]}),e.type&&(0,f.jsxs)("div",{className:"".concat(C.statusMessage," ").concat("success"===e.type?C.success:C.error),children:[(0,f.jsx)("p",{children:e.message}),e.url&&(0,f.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:C.imageLink,children:"View uploaded image"})]}),(0,f.jsx)(w,{onSuccess:e=>{a({type:"success",message:e.message,url:e.url})},onError:e=>{a({type:"error",message:e})}}),(0,f.jsxs)("div",{className:C.instructions,children:[(0,f.jsx)("h2",{className:C.instructionsTitle,children:"Instructions:"}),(0,f.jsxs)("ul",{className:C.instructionsList,children:[(0,f.jsx)("li",{children:"Select an image file to upload"}),(0,f.jsx)("li",{children:"Specify the target directory in the repository (e.g., \u201cimages/blog\u201d)"}),(0,f.jsx)("li",{children:"Provide a filename for the image (e.g., \u201cheader-image.jpg\u201d)"}),(0,f.jsx)("li",{children:"The image will be committed to your configured GitHub repository"})]})]})]})}},893:(e,a,t)=>{t.d(a,{U2:()=>m,Ji:()=>l,QF:()=>c,eC:()=>o});var r=t(392),n=t(524);const s=()=>{const e=(0,n.Ri)(n.v$)||"";return{[n.v$]:e}};var i=t(323);const l=async e=>{const a="".concat(r.BQ.url,"?path=").concat(e),t=await fetch(a);await(0,i.L)(t);const n=(await t.json()).data.data;return Array.isArray(n)?n:[n]},o=async e=>{let{file:a,directory:t,filename:n,commitMessage:l}=e;const o=new FormData;o.append("file",a),o.append("directory",t),o.append("filename",n),o.append("commit_message",l);const c=await fetch(r.sV.url,{method:r.sV.method,headers:s(),body:o});await(0,i.L)(c);return(await c.json()).data},c=async e=>{let{path:a,content:t,commitMessage:n,sha:l}=e;const o=await fetch(r.Yl.url,{method:r.Yl.method,headers:s(),body:JSON.stringify({path:a,content:t,commitMessage:n,sha:l})});await(0,i.L)(o);return(await o.json()).data},m=async e=>{let{path:a,message:t,sha:n}=e;const l=t||"Delete ".concat(a),o=await fetch(r.c8.url,{method:r.c8.method,headers:s(),body:JSON.stringify({path:a,commitMessage:l,sha:n})});await(0,i.L)(o)}}}]);